from msg_format import rtm_msg
from msg_flatten import FlattenedMsg

if __name__=='__main__':
    test_msgs = (
        # Login test
        '242401fe484155563442474e365335303032323139010036190a1b140202000c3839383630393234373930303233313636363036010130524a50454130304841553041414631333130303139353596'
        '242401fe484155563442474e365335303032323139010067190a1b140202000c383938363039323437393030323331363636303602010230524a50454130304841553041414631333130303139353530524a50454130304841553041414631333130303139353630524a504541303048415530414146313331303031393537c7',
        '232301fe484155563442474e365335303032323139010066190a1b140202000c3839383630393234373930303233313636363036031830524a50454130304841553041414631333130303139353530524a50454130304841553041414631333130303139353630524a504541303048415530414146313331303031393537dc',
        # While vehicle data test
        '242402fe484155563442474e365335303032323139010026190a1b14020201ffffffffffffffffffffffffffffffffffffff010003aabbcc0004aabbccddcf',
        '232302fe484155563442474e36533530303232313901001b190a1b14020201ffffffffffffffffffffffffffffffffffffffffd6',
        # e-Motor data test
        '232302fe484155563442474e365335303032323139010020190a1b1402020202fffffffffffffffffffffffffefefefefefefefefefefefeec',
        '242402fe484155563442474e365335303032323139010029190a1b1402020202fffffffffffffffffffffefefefefefefefefefeff010003aabbcc0004aabbccddc1',
        # Engine data test
        '232302fe484155563442474e36533530303232313901000c190a1b14020204ffffffffff3b',
        '242402fe484155563442474e365335303032323139010016190a1b14020204ffffff010003aabbcc0004aabbccddfa',
        # GNSS data test
        '232302fe484155563442474e365335303032323139010010190a1b14020205ffffffffffffffffff26',
        '242402fe484155563442474e36533530303232313901001e190a1b14020205ffffffffffffffffffffff010003aabbcc0004aabbccddf3',
        # Pack extrema data test
        '232302fe484155563442474e365335303032323139010015190a1b14020206ffffffffffffffffffffffffffffdf',
        # Warnings data test
        '232302fe484155563442474e36533530303232313901002c190a1b14020207030000000300000007000100030008000200080003000c0004000d000100060920000a000bc9',
        '242402fe484155563442474e36533530303232313901003e190a1b14020206030000000300000007000100030008000200080003000c0004000d000100060920000a000b0200030103ff010003aabbcc0004aabbccddfd',
        # Cell volts data test
        '232302fe484155563442474e36533530303232313901002a190a1b1402020802ffffffffffffffffff04ffffffffffffffffffffffffffffffffff03ffffffffffffeb',
        '242402fe484155563442474e365335303032323139010031190a1b1402020702ffffffffff0004ffffffffffffffffffffffffff0003ffffffffffffff010003aabbcc0004aabbccdddb',
        # Probe temps data test
        '232302fe484155563442474e365335303032323139010013190a1b1402020902ff0000050005ffffffffffd4',
        '242402fe484155563442474e365335303032323139010020190a1b1402020802ff0000050005ffffffffffff010003aabbcc0004aabbccddc2',
        # Oen-define data test
        '232302fe484155563442474e365335303032323139010019190a1b140202800010fefefefefefefefefefefefefefefefe45',
        # Logout test
        '232304fe484155563442474e365335303032323139010008190a1b1402020802c8',
        '242404fe484155563442474e365335303032323139010008190a1b1402020802c8',
        # Platform login test
        '232305fe484155563442474e365335303032323139010029190a1b1402020802484155563442474e36533530484155563442474e365335303032323139484155018d',
        '242405fe484155563442474e365335303032323139010029190a1b1402020802484155563442474e36533530484155563442474e365335303032323139484155018d',
        # Platform logout test
        '232306fe484155563442474e365335303032323139010008190a1b1402020802ca',
        '242406fe484155563442474e365335303032323139010008190a1b1402020802ca',
        # Ack test
        '24240101484155563442474e365335303032323139010006190a1b14020236',
        # Activation test
        '242409fe48474c48334143463150413731343430380102321906170f0616313233343536373831323334353637380103ce6f0a94cbece0c56ba8e4eda6dbf838d5374536b0b5e9b57db2abe2ace31abc8f9c2a72c8a71c2128e999c354733542b034a5fc521d7c2124bb3c7eff16c2f1161c11f7e38aebf17a69a2d68d23d78730b98b0d1c867076f44003786e35b89fda73130a48211959521cc613c9978f622f328383350bf334e4a7a80208981123d384d4f8685189240f8ebc56dfc4c0628a044466bc13c833dde1bea636147892069c6c294923e4c6c8aa64d0e981a0f8135d1c332ef9fdc7c3612b37decb5df6cc8e4040cf912b845456d169807b494805eeed7aec09f22b344f0ed029375f49903bd704515e319509aeacf3c50daaed3561c9a54879f13ff0790a499c96d3c101000148474c4833414346315041373134343038ff020100be3b4d48647b90fd359f5365b700850ff095c360470336505bfd7393454bd782719567968e021109f2d21ebf8aa4548020336dc21e6afdc07d4897cbc25b007c02e28c971d626acf4ed30d2197735480d5489967bd7bc336da1e9a6f12c3e9fdb60a1c00f237042f8f82e31a51307e97f77d4bfb50b5cbcd80c1711a5adb0d7e8be9650222e71273a3642fe65e93e437deaef46f257f389fdfac889333ca759ce7ec5027879c4d8bf872df84a2ed1cab4c7a2e92ccabde77b22dee19af32f371360f67b0310fbae66201c8f68e8d2e709f692951bca151a6ac509443fafcd565fda62b3b5d4d5b7350995699f7b1f39b60b4ef6791f6d8a75661bef055fe93c700000d',
        # Weird message with duplicated warning blocks and umatched general warning flags and codes
        '232302fe484155563442474e365335303032323139010052190a1b14020207030000000300000007000100030008000200080003000c0004000d000100060920000a000b07030000000300000007000100030008000200080003000c0004000d000100060920000a000b9e',
        '242402fe484155563442474e365335303032323139010069190a1b14020206030000000300000007000100030008000200080003000c0004000d000100060920000a000b020002010306030000000300000007000100030008000200080003000c0004000d000100060920000a000b0204020103ff010003aabbcc0004aabbccdd85',
        # Whole message test
        '232302fe484155563442474e365335303032323139010239190a0b13081201010301007a00000a1d1e81274355011e19990010020201013851794e343d1e4b272402023751894cdb401e4b26f7050000000000000000000601020fdf01140fdc01013a010a38070000000000000000000801011e81274300c00001c00fdd0fdf0fde0fde0fdd0fdd0fdd0fde0fdf0fde0fdd0fdd0fde0fde0fdd0fdd0fdd0fde0fdd0fdc0fdd0fdd0fdd0fde0fdd0fde0fde0fdd0fdf0fde0fde0fdd0fdd0fdd0fde0fdd0fde0fde0fdd0fde0fde0fdd0fdd0fdd0fde0fde0fde0fdd0fdd0fde0fdc0fdc0fdd0fdd0fde0fdd0fdd0fdc0fdd0fdd0fdd0fde0fdd0fde0fde0fde0fde0fdd0fde0fdd0fdd0fdd0fde0fde0fdf0fdf0fdf0fdf0fdd0fdd0fde0fdd0fdd0fde0fde0fdf0fde0fdd0fde0fdd0fdf0fde0fdf0fdf0fdf0fdf0fde0fde0fde0fde0fdd0fde0fdd0fde0fdd0fdd0fde0fdc0fdd0fdd0fdd0fde0fdc0fde0fdd0fdd0fdd0fde0fdd0fdd0fde0fdd0fde0fdc0fde0fde0fde0fde0fde0fdc0fdc0fdd0fdd0fdd0fdd0fde0fdc0fdd0fdd0fdc0fde0fde0fde0fdd0fdd0fdf0fde0fdf0fde0fde0fde0fdf0fde0fdf0fde0fdf0fde0fdf0fde0fdf0fdd0fdd0fde0fde0fde0fde0fdd0fde0fdd0fde0fdd0fdd0fde0fde0fdd0fdd0fde0fde0fdd0fdd0fdf0fde0fdd0fde0fde0fde0fde0fde0fde0fde0fdf0fde09010100303a393a3a393939393938393939393939393a3939393a3a3a3a393a3a39393939393939393839393939393939393a3a3a82001d000007ff0107fd01047a0107fd01000100010001000101010001069a015d',
        '242402fe484155563442474e365335303032323139010323190a1c0e2d2f010103010000000261061be275464b011f199902020103477d0000030d404a0203497d0000030d3b45050102000000000000000006000000000000000003000800020009002500090026000701011be2754600b40f750f780f760f790f770f760f790f7a0f7a0f7c0f7b0f7c0f7d0f7d0f7d0f7a0f7a0f7a0f7b0f7a0f7b0f7b0f7c0f7d0f7c0f7c0f7e0f7c0f7c0f7a0f7b0f7b0f7d0f7b0f7d0f7d0f7d0f7d0f7d0f7c0f7d0f7c0f7c0f7c0f7d0f790f780f760f7c0f7b0f7c0f7c0f7c0f7c0f7c0f770f7d0f780f7d0f7c0f7c0f7d0f7a0f7f0f7a0f7d0f7c0f7b0f7c0f7c0f7d0f7c0f7c0f7f0f7d0f7d0f7e0f7d0f7d0f7e0f7d0f7e0f7e0f7d0f7d0f7d0f7d0f7d0f7e0f7e0f7b0f7c0f7c0f7c0f7b0f7b0f780f7c0f7d0f7a0f7c0f7c0f7c0f7c0f7c0f7c0f7d0f7a0f7b0f7a0f7a0f7c0f7d0f7c0f7d0f7d0f7c0f7c0f7b0f7d0f790f7c0f7b0f7a0f7c0f7c0f7c0f7b0f7c0f7d0f7b0f7d0f7c0f7c0f7c0f790f7c0f7c0f7b0f7c0f7a0f7d0f7b0f7b0f7c0f7c0f7c0f7d0f7b0f7b0f7a0f7c0f7b0f7c0f7c0f7d0f7c0f7b0f7b0f7c0f7b0f7c0f7c0f7c0f7c0f7b0f7c0f7c0f7d0f7c0f7c0f7c0f7c0f7c0f7c0f7d0f7d0f7d0f7d0f7d0801010030464646454646464645444545464645444646464646464646464746464646464645444646444544434546454545454645ff0201002825085f0b2c0a294d47f6a8a738032f20bd7e5ede663a893c6c159f27e9154b7ac2d83e2fcbff21891237d29771e7c1f89552cc4eb82d480b291f5d253cc824908da0ee55ecd28a357fbb8013d7b371b4e0ac01061d34403871e645952c4d06d2fa25f374291af07f83e7b0e0d34fa29c5107866ca4561dfbcd2b72e04de52cfd5bbb6d66575189dc133db02cce0ef55ee2daab8d6de8d96e154e99f0cebeb0ecdc54e83aab694ae451e687b848735b0c6db777d63483c3c849fe2d2a39f895e6277670fd4ef586ea0cc65bfb6ace7a7be95ae695977f3377ea6b2187eae74ca021afc2646266af61a850695e441a4bbf6b807f1345897b38d86a8e90c1ed350000820023000004190104230103dd0103f70100010001000100010101000105db0100ffffff0101e7',
)
    
    for msg in test_msgs:
        print("\n\nTest for: ", msg)
        print("for parsed message:")
        msg_obj = rtm_msg.parse(bytes.fromhex(msg))
        print(msg_obj)
        print("\nfor flattened message:")
        for k,v in FlattenedMsg(msg_obj).items():
            print(f"{k:<50}{v}")